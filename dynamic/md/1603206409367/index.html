<h3 id="__markdown_header_id_githubpage">github pageçš„å±€é™<span style="background-image: url(&quot;https://blog.halberd.cn/dynamic/favicon.svg&quot;);"></span></h3>
<p>æœ¬ç«™æ˜¯ç”±<a target="_blank" href="https://github.io">github page</a>æ‰˜ç®¡çš„ï¼Œä½†æ˜¯æ­£å¸¸æƒ…å†µä¸‹å®ƒæœ‰å‡ ä¸ªç¼ºç‚¹ï¼š</p>
<ul>
<li>ç½‘é€Ÿè´¼æ…¢ï¼Œæˆ–è€…ä¸ç¿»å¢™å‹æ ¹æ— æ³•è®¿é—®</li>
<li>æ— æ³•ä½¿ç”¨vue routerçš„history</li>
<li>é™æ€ç½‘ç«™æ²¡åŠæ³•è‡ªèº«æ›´æ–°</li>
</ul>
<blockquote>
  <p>æ¥ä¸‹æ¥ä¾æ¬¡å±•ç¤ºæˆ‘çš„ä¸‰ä¸ªå°æŠ€å·§äº†<img alt="sticker" src="https://cdn.jsdelivr.net/gh/yunyuyuan/yunyuyuan.github.io@latest/dynamic/sticker/yellow-face/59.png?ran=1603202675767"></p>
</blockquote>
<h4 id="__markdown_header_id_jsdelivrcdn">jsdelivréå¸¸ğŸ‚ğŸºçš„CDN<span style="background-image: url(&quot;https://blog.halberd.cn/dynamic/favicon.svg&quot;);"></span></h4>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå½“ç„¶æ˜¯æœ€å¤§çš„é—®é¢˜: <strong>è®¿é—®github pageéå¸¸éå¸¸éå¸¸æ…¢</strong>ï¼Œè‡³äºæœ‰å¤šæ…¢å°±å¾—è‡ªå·±è¯•è¯•ï¼Œç”±äºå·²ç»è§£å†³äº†è¯¥é—®é¢˜ï¼Œæ­¤ç«™è®¿é—®å¾ˆå¿«ã€‚</p>
<blockquote>
  <p>æœ¬èŠ‚çš„ä¸»è§’æ˜¯<a target="_blank" href="https://www.jsdelivr.com/">jsdelivr</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…è´¹çš„ä¼˜è´¨cdnç½‘ç«™ï¼Œæä¾›npmï¼Œgithubç­‰cdnåŠ é€Ÿ</p>
</blockquote>
<p>é—®é¢˜æ˜¯å¦‚ä½•åœ¨vue-cliä¸­ä¸€é”®å¼€å¯è¯¥cdnå‘¢?ä¸‹é¢ç”¨ä»£ç è¯´æ˜ã€‚</p>
<ol>
<li>ä¿®æ”¹<code>vue.config.js</code>ã€‚ç”±<a target="_blank" href="https://www.jsdelivr.com/?docs=gh">jsdelivrçš„è¯´æ˜</a>å¯çŸ¥ï¼Œjsdelivrçš„cdnå¯ä»¥ç›´æ¥ä»urlä¸ŠåŠ é€Ÿgithubèµ„æºè®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹<code>vue.config.js</code>å¦‚ä¸‹:</li>
</ol>
<pre><span>javascript</span><code class="javascript language-javascript hljs"><span class="hljs-built_in">module</span>.exports = {
    ......
    <span class="hljs-comment">/* å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒå°±é»˜è®¤æœªæ ¹ç›®å½•
     * å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒå°±æ‰“åŒ…ä¸ºcdnå‰ç¼€çš„ç›®å½•
     *nameå³æ˜¯githubè´¦æˆ·å
    **/</span>
    <span class="hljs-attr">publicPath</span>: process.env.NODE_ENV === <span class="hljs-string">'development'</span>?<span class="hljs-string">'/'</span>:(<span class="hljs-string">`https://cdn.jsdelivr.net/gh/<span class="hljs-subst">${name}</span>/<span class="hljs-subst">${name}</span>.github.io@latest/dist`</span>),
    ......
}
</code></pre>
<ol start="2">
<li>éœ€è¦å†™åœ¨vueé‡Œçš„cdnæ–‡ä»¶ï¼Œä½¿ç”¨å‰ç¼€ï¼š</li>
</ol>
<pre><span>javascript</span><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> baseDynamicUrl = process.env.NODE_ENV === <span class="hljs-string">'development'</span>?<span class="hljs-string">''</span>:(<span class="hljs-string">`https://cdn.jsdelivr.net/gh/<span class="hljs-subst">${name}</span>/<span class="hljs-subst">${name}</span>.github.io@latest/<span class="hljs-subst">${your directory}</span>`</span>)
</code></pre>
<h4 id="__markdown_header_id_404htmlapp">ä½¿ç”¨404.htmlä½œä¸ºapp<span style="background-image: url(&quot;https://blog.halberd.cn/dynamic/favicon.svg&quot;);"></span></h4>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº<a target="_blank" href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/creating-a-custom-404-page-for-your-github-pages-site">github.ioçš„404</a>çš„éªšæ“ä½œã€‚</p>
<blockquote>
  <p>æ€è·¯æ˜¯æŠŠ<code>404.html</code>ä½œä¸ºappï¼Œä¸å†™ä»»ä½•<code>index.html</code>ä»¥åŠ<code>README.md</code>ï¼Œè®©é™æ€ç½‘ç«™æ— è®ºæ”¶åˆ°ä»€ä¹ˆè¯·æ±‚éƒ½<em>404</em>ï¼Œç„¶åæ‰‹åŠ¨å†™è·¯ç”±è¯†åˆ«ã€‚ä¸‹é¢ä»‹ç»éœ€è¦çš„æ­¥éª¤</p>
</blockquote>
<ol>
<li>ç¼–è¾‘<code>vue.config.js</code>ï¼š</li>
</ol>
<pre><span>js</span><code class="js language-js hljs javascript"><span class="hljs-built_in">module</span>.exports = {
    ......
    <span class="hljs-comment">/* å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒå°±æ­£å¸¸æ‰“åŒ…
     * å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒå°±æ‰“åŒ…indexä¸º404
    **/</span>
    <span class="hljs-attr">indexPath</span>: process.env.NODE_ENV?<span class="hljs-string">'index.html'</span>:<span class="hljs-string">'../404.html'</span>,
    ......
}
</code></pre>
<ol start="2">
<li>æ‰‹å†™è·¯ç”±è¯†åˆ«ï¼Œå…¶å®è¿™é‡Œå¯ä»¥ç”¨vue routerçš„historyè·¯ç”±çš„ï¼Œä½†å½“æ—¶æˆ‘æ‰“ç®—è‡ªå·±å†™ä¸€ä¸ªç®€å•çš„ï¼š</li>
</ol>
<pre><span>js</span><code class="js language-js hljs javascript"><span class="hljs-comment">/**********
  route.js
***********/</span>

<span class="hljs-comment">// è·å–è·¯ç”±å˜é‡</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">routeInfo</span> (<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// å»æ‰æœ€åçš„ '/'</span>
    <span class="hljs-keyword">let</span> pathname = <span class="hljs-built_in">window</span>.location.pathname.replace(<span class="hljs-regexp">/^(.+?)\/*$/</span>, <span class="hljs-string">'$1'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> routes){
        <span class="hljs-keyword">let</span> regexp = i.path.replace(<span class="hljs-regexp">/\/:(\w+)/g</span>, <span class="hljs-string">'/(?&lt;$1&gt;[^/]+)'</span>);
        <span class="hljs-keyword">let</span> matcher = pathname.match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">`^<span class="hljs-subst">${regexp}</span>$`</span>));
        <span class="hljs-keyword">if</span> (matcher){
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">name</span>: i.name,
                <span class="hljs-attr">params</span>: matcher.groups||{},
                <span class="hljs-attr">title</span>: i.title
            }
        }
    }
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">name</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">params</span>: {},
        <span class="hljs-attr">title</span>: <span class="hljs-string">'404'</span>
    }
}

<span class="hljs-keyword">const</span> routes = [
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'index'</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'ä¸»é¡µ'</span>,
    },
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/article'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'article'</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æ–‡ç« åˆ—è¡¨'</span>,
    },
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/article/:id'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'articleDetail'</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æ–‡ç« è¯¦æƒ…'</span>,
    },
    ......
]
</code></pre>
<p><strong>åœ¨<code>index.vue</code>ä¸­è¿™ä¹ˆä½¿ç”¨ï¼š</strong></p>
<pre><span>js</span><code class="js language-js hljs javascript">&lt;template&gt;
......
&lt;component :is=<span class="hljs-string">"comp"</span>/&gt;
......
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
......
  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">const</span> route = routeInfo();
    <span class="hljs-built_in">document</span>.title = route.title;

    <span class="hljs-comment">// åˆ¤æ–­è·¯ç”±ä½ç½®</span>
    <span class="hljs-keyword">switch</span> (route.name){
      <span class="hljs-keyword">case</span> <span class="hljs-string">'index'</span>:
        <span class="hljs-built_in">this</span>.routeNow = <span class="hljs-string">'home'</span>;
        <span class="hljs-built_in">this</span>.comp = <span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/home/index'</span>)
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'article'</span>:
        <span class="hljs-built_in">this</span>.routeNow = <span class="hljs-string">'article'</span>;
        <span class="hljs-built_in">this</span>.comp = <span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/article/List'</span>);
        bread;
      ......
    }
  }
......
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<hr>
<p>è¿™æ ·åœ¨æ‰“åŒ…å®Œæˆåå°±åªæœ‰ä¸€ä¸ª<code>404.html</code>ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè½¬åˆ°è¿™é‡Œï¼Œç„¶åç”±jså»å†³å®šåŠ è½½å“ªä¸ªé¡µé¢ï¼Œè¿™æ“ä½œå¤Ÿ<img alt="sticker" src="https://cdn.jsdelivr.net/gh/yunyuyuan/yunyuyuan.github.io@latest/dynamic/sticker/aru/79.png?ran=1603202675767">å§ã€‚</p>
<h4 id="__markdown_header_id_">é™æ€ç½‘ç«™è‡ªæˆ‘æ›´æ–°<span style="background-image: url(&quot;https://blog.halberd.cn/dynamic/favicon.svg&quot;);"></span></h4>
<blockquote>
  <p>è¿™ä¸ªæ²¡å•¥ä»‹ç»çš„ï¼Œåªèƒ½è¯´githubç‰›é€¼<img alt="sticker" src="https://cdn.jsdelivr.net/gh/yunyuyuan/yunyuyuan.github.io@latest/dynamic/sticker/yellow-face/52.png?ran=1603202675767">ï¼Œæ­¤ç«™çš„è‡ªæˆ‘æ›´æ–°åŸºäº<a target="_blank" href="https://developer.github.com/">github rest api</a>ã€‚
  è¿™é‡Œçš„<code>è‡ªæˆ‘æ›´æ–°</code>æŒ‡çš„æ˜¯ä½¿ç”¨é™æ€ç½‘ç«™æœ¬èº«æ›´æ–°ç½‘ç«™ï¼Œå®åœ¨æƒ³ä¸åˆ°åˆ«çš„æœ¯è¯­äº†<img alt="sticker" src="https://cdn.jsdelivr.net/gh/yunyuyuan/yunyuyuan.github.io@latest/dynamic/sticker/aru/62.png?ran=1603202675767"></p>
</blockquote>
<hr>
<p>å°±è¿™ä¹ˆå¤šäº†ï¼Œæœ¬æ–‡ç»“æŸ!</p>